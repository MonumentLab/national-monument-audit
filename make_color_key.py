# -*- coding: utf-8 -*-

import argparse
import os
from PIL import Image, ImageDraw
from pprint import pprint
import sys

# input
parser = argparse.ArgumentParser()
parser.add_argument('-width', dest="WIDTH", default=600, type=int, help="Image width")
parser.add_argument('-height', dest="HEIGHT", default=1, type=int, help="Image height")
parser.add_argument('-out', dest="OUTPUT_FILE", default="app/img/color_key.png", help="Output image file")
a = parser.parse_args()

colors = [(9,7,32), (10,8,34), (11,9,36), (12,9,38), (13,10,41), (14,11,43), (16,11,45), (17,12,47), (18,13,49), (19,13,52), (20,14,54), (21,14,56), (22,15,59), (24,15,61), (25,16,63), (26,16,66), (28,16,68), (29,17,71), (30,17,73), (32,17,75), (33,17,78), (34,17,80), (36,18,83), (37,18,85), (39,18,88), (41,17,90), (42,17,92), (44,17,95), (45,17,97), (47,17,99), (49,17,101), (51,16,103), (52,16,105), (54,16,107), (56,16,108), (57,15,110), (59,15,112), (61,15,113), (63,15,114), (64,15,116), (66,15,117), (68,15,118), (69,16,119), (71,16,120), (73,16,120), (74,16,121), (76,17,122), (78,17,123), (79,18,123), (81,18,124), (82,19,124), (84,19,125), (86,20,125), (87,21,126), (89,21,126), (90,22,126), (92,22,127), (93,23,127), (95,24,127), (96,24,128), (98,25,128), (100,26,128), (101,26,128), (103,27,128), (104,28,129), (106,28,129), (107,29,129), (109,29,129), (110,30,129), (112,31,129), (114,31,129), (115,32,129), (117,33,129), (118,33,129), (120,34,129), (121,34,130), (123,35,130), (124,35,130), (126,36,130), (128,37,130), (129,37,129), (131,38,129), (132,38,129), (134,39,129), (136,39,129), (137,40,129), (139,41,129), (140,41,129), (142,42,129), (144,42,129), (145,43,129), (147,43,128), (148,44,128), (150,44,128), (152,45,128), (153,45,128), (155,46,127), (156,46,127), (158,47,127), (160,47,127), (161,48,126), (163,48,126), (165,49,126), (166,49,125), (168,50,125), (170,51,125), (171,51,124), (173,52,124), (174,52,123), (176,53,123), (178,53,123), (179,54,122), (181,54,122), (183,55,121), (184,55,121), (186,56,120), (188,57,120), (189,57,119), (191,58,119), (192,58,118), (194,59,117), (196,60,117), (197,60,116), (199,61,115), (200,62,115), (202,62,114), (204,63,113), (205,64,113), (207,64,112), (208,65,111), (210,66,111), (211,67,110), (213,68,109), (214,69,108), (216,69,108), (217,70,107), (219,71,106), (220,72,105), (222,73,104), (223,74,104), (224,76,103), (226,77,102), (227,78,101), (228,79,100), (229,80,100), (231,82,99), (232,83,98), (233,84,98), (234,86,97), (235,87,96), (236,88,96), (237,90,95), (238,91,94), (239,93,94), (240,95,94), (241,96,93), (242,98,93), (242,100,92), (243,101,92), (244,103,92), (244,105,92), (245,107,92), (246,108,92), (246,110,92), (247,112,92), (247,114,92), (248,116,92), (248,118,92), (249,120,93), (249,121,93), (249,123,93), (249,125,94), (249,127,94), (249,129,95), (249,131,95), (249,133,96), (249,135,97), (249,137,97), (249,138,98), (249,140,99), (249,142,100), (249,144,101), (249,146,102), (249,148,103), (249,150,104), (249,152,105), (249,154,106), (249,155,107), (249,157,108), (249,159,109), (249,161,110), (249,163,111), (249,165,113), (249,167,114), (249,169,115), (249,170,116), (249,172,118), (249,174,119), (249,176,120), (249,178,122), (249,180,123), (249,182,124), (249,183,126), (249,185,127), (249,187,129), (249,189,130), (249,191,132), (249,193,133), (249,194,135), (249,196,136), (249,198,138), (249,200,140), (249,202,141), (249,204,143), (249,205,144), (249,207,146), (249,209,148), (249,211,149), (249,213,151), (249,215,153), (249,216,154), (249,218,156), (249,220,158), (249,222,160), (249,224,161), (249,226,163), (249,227,165), (249,229,167)]
colors.reverse()

baseImg = Image.new(mode="RGB", size=(a.WIDTH, a.HEIGHT), color=(0,0,0))
draw = ImageDraw.Draw(baseImg)

for i in range(a.WIDTH):
    n = 1.0 * i / (a.WIDTH-1)
    colorIndex = int(round(n * (len(colors)-1)))
    rgb = colors[colorIndex]
    x0 = i
    x1 = x0 + 1
    y0 = 0
    y1 = a.HEIGHT
    draw.rectangle([(x0, y0), (x1, y1)], fill=rgb)

baseImg.save(a.OUTPUT_FILE)
print("Done.")
